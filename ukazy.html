<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–£–∫–∞–∑–∏ –ì–µ—Ç—å–º–∞–Ω–∞ | –ë–Ü–õ–ï –ü–û–õ–ï</title>
    <style>
        body {
            font-family: 'Verdana', 'Arial', sans-serif;
            background-color: #CCCCFF;
            color: #000000;
            margin: 20px;
        }
        .container {
            width: 800px;
            margin: 0 auto;
            background-color: #FFFFFF;
            border: 5px solid #000080;
            padding: 10px;
            position: relative; /* –í–∞–∂–ª–∏–≤–æ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ */
        }
        h1 {
            color: #FF0000;
            font-size: 24px;
            text-align: center;
            border-bottom: 2px dashed #000080;
            padding-bottom: 5px;
        }
        /* –°—Ç–∏–ª—ñ –¥–ª—è –ø—Ä–µ–≤'—é –£–∫–∞–∑—É */
        .ukaz-preview {
            border: 2px groove #000000;
            padding: 10px;
            margin-bottom: 15px;
            background-color: #FFFFEE;
            cursor: pointer; /* –î–ª—è –∫–ª—ñ–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ */
        }
        .ukaz-preview:hover {
            background-color: #FFEEAA; /* –ó–º—ñ–Ω–∞ –∫–æ–ª—å–æ—Ä—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ */
        }
        .preview-title {
            color: #CC0000;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .preview-meta {
            font-style: italic;
            font-size: 12px;
            color: #666666;
            text-align: right;
            border-top: 1px dotted #AAAAAA;
            padding-top: 5px;
        }
        a:link, a:visited {
            color: #0000FF;
            text-decoration: underline;
        }
        .menu a {
            font-weight: bold;
            text-decoration: none;
            padding: 3px 8px;
            border: 1px outset #CCCCCC;
            background-color: #E0E0E0;
        }
        pre {
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            background-color: #F0F0F0;
            padding: 8px;
            border: 1px solid #CCCCCC;
        }

        /* === –°–¢–ò–õ–Ü –î–õ–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –í–Ü–ö–ù–ê (2000-—Ç—ñ) === */
        #modal {
            display: none; /* –ü—Ä–∏—Ö–æ–≤–∞–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º */
            position: fixed; /* –§—ñ–∫—Å–æ–≤–∞–Ω–µ –ø–æ–ª–æ–∂–µ–Ω–Ω—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ */
            z-index: 10; /* –í–∏—â–µ —ñ–Ω—à–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5); /* –ù–∞–ø—ñ–≤–ø—Ä–æ–∑–æ—Ä–∏–π —á–æ—Ä–Ω–∏–π —Ñ–æ–Ω */
        }
        #modal-content {
            background-color: #FFFFFF;
            margin: 5% auto; /* –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è */
            padding: 20px;
            border: 8px ridge #808080; /* –°—Ç–∞—Ä–æ–≤–∏–Ω–Ω–∞ "3D" —Ä–∞–º–∫–∞ */
            width: 700px;
            box-shadow: 5px 5px 10px rgba(0,0,0,0.3);
        }
        #modal-close {
            color: #CC0000;
            float: right;
            font-size: 30px;
            font-weight: bold;
            text-decoration: none;
            cursor: pointer;
            margin-left: 10px;
        }
        #modal-close:hover {
            color: #FF0000;
        }
        #modal-title {
            color: #FF0000;
            font-size: 24px;
            text-align: center;
            margin-bottom: 10px;
            border-bottom: 2px dashed #000080;
        }
        #modal-signer {
            font-style: italic;
            text-align: right;
            font-size: 14px;
            color: #000080;
            border-top: 1px solid #000080;
            padding-top: 5px;
        }
    </style>
</head>
<body>

<div class="container">

    <h1>üìú –ê—Ä—Ö—ñ–≤ –£–∫–∞–∑—ñ–≤ –ì–µ—Ç—å–º–∞–Ω–∞—Ç—É</h1>
    <p style="text-align: center; font-style: italic;">–ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö –¥—ñ—é—á–∏—Ö –ø–æ—Å—Ç–∞–Ω–æ–≤ —Ç–∞ —Ä–æ–∑–ø–æ—Ä—è–¥–∂–µ–Ω—å</p>

    <table width="100%" border="0" cellspacing="5" cellpadding="5" bgcolor="#C0C0C0" style="margin-bottom: 15px;">
        <tr>
            <td align="center" class="menu"><a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a></td>
            <td align="center" class="menu"><a href="statut.html">–°—Ç–∞—Ç—É—Ç</a></td>
            <td align="center" class="menu"><a href="ukazy.html">–£–∫–∞–∑–∏ –ì–µ—Ç—å–º–∞–Ω–∞</a></td>
            <td align="center" class="menu"><a href="contacts.html">–ó–≤'—è–∑–æ–∫</a></td>
        </tr>
    </table>

    <div id="UkazyList">
        <h2>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –£–∫–∞–∑—ñ–≤...</h2>
        <p>–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞—á–µ–∫–∞–π—Ç–µ, —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –£–∫–∞–∑–∏ –∑ –∞—Ä—Ö—ñ–≤—ñ–≤ –ì–µ–Ω–µ—Ä–∞–ª—å–Ω–æ—ó –°—Ç–∞—Ä—à–∏–Ω–∏.</p>
    </div>

    <div style="border-top: 2px solid #000080; margin-top: 15px; padding-top: 10px; text-align: center; font-size: 10px;">
        &copy; 2025 –î–µ—Ä–∂–∞–≤–∞ –ë—ñ–ª–µ –ü–æ–ª–µ. –ê—Ä—Ö—ñ–≤ –£–∫–∞–∑—ñ–≤.
    </div>

</div>

<div id="modal">
    <div id="modal-content">
        <span id="modal-close">&times;</span>
        <div id="modal-title"></div>
        <div id="modal-text"></div>
        <div id="modal-signer"></div>
    </div>
</div>

<script>
    var totalUkazyLoaded = 0;
    var maxUkazy = 100;
    var UkazyListDiv = document.getElementById('UkazyList');
    var modal = document.getElementById('modal');
    var modalClose = document.getElementById('modal-close');
    var modalTitle = document.getElementById('modal-title');
    var modalText = document.getElementById('modal-text');
    var modalSigner = document.getElementById('modal-signer');

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
    function showUkaz(ukazNumber) {
        var ukazPath = 'Ukazy/' + ukazNumber + '.txt';
        modalTitle.innerHTML = "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...";
        modalText.innerHTML = '<p style="text-align: center;">–û—á—ñ–∫—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–∞...</p>';
        modalSigner.innerHTML = '';
        modal.style.display = "block";
        
        var xhr = new XMLHttpRequest();
        xhr.open('GET', ukazPath, true);
        
        xhr.onload = function() {
            if (xhr.status === 200) {
                var fullText = xhr.responseText;
                
                // 1. –í–∏—Ç—è–≥—É—î–º–æ –ù–∞–∑–≤—É
                var nameMatch = fullText.match(/==name:\s*(.*)/i);
                var title = nameMatch ? nameMatch[1].trim() : "–£–∫–∞–∑ –±–µ–∑ –Ω–∞–∑–≤–∏";

                // 2. –í–∏—Ç—è–≥—É—î–º–æ –ü—ñ–¥–ø–∏—Å–∞–Ω—Ç–∞
                var signerMatch = fullText.match(/==([A-Z–ê-–Ø“ê–Ñ–Ü–á\s,]+)\s*$/i);
                var signer = signerMatch ? signerMatch[1].trim() : "–ù–µ–≤—ñ–¥–æ–º–∏–π –æ—Ä–≥–∞–Ω";

                // 3. –í–∏–¥–∞–ª—è—î–º–æ –º–µ—Ç–∞-–¥–∞–Ω—ñ –∑ –∫–æ–Ω—Ç–µ–Ω—Ç—É –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                var cleanContent = fullText
                    .replace(/==name:.*\n?/, '')
                    .replace(/==[A-Z–ê-–Ø“ê–Ñ–Ü–á\s,]+$/, '')
                    .trim();

                modalTitle.innerHTML = "–£–∫–∞–∑ –ì–µ—Ç—å–º–∞–Ω—Å—Ç–≤–∞ ‚Ññ" + ukazNumber + ": " + title;
                modalText.innerHTML = '<pre>' + cleanContent + '</pre>';
                modalSigner.innerHTML = '–¶–µ–π –£–∫–∞–∑ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ: **' + signer + '**';
                
            } else {
                modalTitle.innerHTML = "–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –£–∫–∞–∑—É ‚Ññ" + ukazNumber;
                modalText.innerHTML = '<p style="color: red; text-align: center;">–§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –¥–æ—Å—Ç—É–ø –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ (HTTP ' + xhr.status + ').</p>';
                modalSigner.innerHTML = '';
            }
        };
        
        xhr.onerror = function() {
            modalTitle.innerHTML = "–ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ";
            modalText.innerHTML = '<p style="color: red; text-align: center;">–ù–µ –≤–¥–∞–ª–æ—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –£–∫–∞–∑—É.</p>';
            modalSigner.innerHTML = '';
        };

        xhr.send();
    }

    // –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
    modalClose.onclick = function() {
        modal.style.display = "none";
        // –ü—Ä–∏–±–∏—Ä–∞—î–º–æ —Ö–µ—à –∑ URL
        history.pushState("", document.title, window.location.pathname + window.location.search);
    }
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
            history.pushState("", document.title, window.location.pathname + window.location.search);
        }
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–µ–≤'—é
    function loadUkazy() {
        UkazyListDiv.innerHTML = '';
        
        for (let i = maxUkazy; i >= 1; i--) {
            let ukazPath = 'Ukazy/' + i + '.txt';
            let xhr = new XMLHttpRequest();
            xhr.open('HEAD', ukazPath, true); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ HEAD, —â–æ–± —à–≤–∏–¥–∫–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É
            
            xhr.onload = (function(ukazNumber) {
                return function() {
                    if (xhr.status === 200) {
                        // –Ø–∫—â–æ —Ñ–∞–π–ª —ñ—Å–Ω—É—î, —Ä–æ–±–∏–º–æ –¥—Ä—É–≥–∏–π –∑–∞–ø–∏—Ç –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–∑–≤–∏
                        let xhrContent = new XMLHttpRequest();
                        xhrContent.open('GET', ukazPath, true);

                        xhrContent.onload = function() {
                            totalUkazyLoaded++;
                            var fullText = xhrContent.responseText;
                            
                            // –í–∏—Ç—è–≥—É—î–º–æ –ù–∞–∑–≤—É
                            var nameMatch = fullText.match(/==name:\s*(.*)/i);
                            var title = nameMatch ? nameMatch[1].trim() : "–£–∫–∞–∑ –±–µ–∑ –Ω–∞–∑–≤–∏";

                            // –í–∏—Ç—è–≥—É—î–º–æ –ü—ñ–¥–ø–∏—Å–∞–Ω—Ç–∞
                            var signerMatch = fullText.match(/==([A-Z–ê-–Ø“ê–Ñ–Ü–á\s,]+)\s*$/i);
                            var signer = signerMatch ? signerMatch[1].trim() : "–ù–µ–≤—ñ–¥–æ–º–∏–π –æ—Ä–≥–∞–Ω";

                            // –°—Ç–≤–æ—Ä—é—î–º–æ –ø—Ä–µ–≤'—é
                            var ukazItem = document.createElement('div');
                            ukazItem.className = 'ukaz-preview';
                            ukazItem.setAttribute('data-ukaz-id', ukazNumber);
                            ukazItem.id = 'ukaz-' + ukazNumber; // ID –¥–ª—è —è–∫–æ—Ä—ñ–≤
                            ukazItem.innerHTML = '<div class="preview-title">–£–∫–∞–∑ ‚Ññ' + ukazNumber + ': ' + title + '</div>' +
                                                 '<div class="preview-meta">–ü—ñ–¥–ø–∏—Å–∞–Ω–æ: ' + signer + ' | <a href="#ukaz-' + ukazNumber + '">–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ...</a></div>';
                            
                            // –û–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –Ω–∞ –ø—Ä–µ–≤'—é
                            ukazItem.onclick = function() {
                                showUkaz(ukazNumber);
                                // –î–æ–¥–∞—î–º–æ —Ö–µ—à –¥–æ URL
                                history.pushState(null, null, "#ukaz-" + ukazNumber);
                            };
                            
                            UkazyListDiv.appendChild(ukazItem);
                        };
                        xhrContent.send();

                    }
                    
                    // –§—ñ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è (–ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, –∫–æ–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ –ø–µ—Ä—à–∏–π —Ü–∏–∫–ª)
                    if (ukazNumber === 1) { 
                        if (totalUkazyLoaded === 0) {
                             UkazyListDiv.innerHTML = '<h2 style="color: red;">–ü–æ–º–∏–ª–∫–∞: –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∂–æ–¥–Ω–æ–≥–æ –£–∫–∞–∑—É –≤ –ø–∞–ø—Ü—ñ "Ukazy".</h2>';
                        } else {
                             let finalMessage = document.createElement('p');
                             finalMessage.innerHTML = '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ **' + totalUkazyLoaded + '** –£–∫–∞–∑—ñ–≤ –ì–µ—Ç—å–º–∞–Ω–∞. <small>(–ö–ª—ñ–∫–Ω—ñ—Ç—å, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç)</small>';
                             UkazyListDiv.prepend(finalMessage);
                        }
                        
                        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î —Ö–µ—à –≤ URL –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
                        if (window.location.hash) {
                            let hash = window.location.hash.substring(1); // –ü—Ä–∏–±–∏—Ä–∞—î–º–æ #
                            let idMatch = hash.match(/ukaz-(\d+)/);
                            if (idMatch) {
                                showUkaz(idMatch[1]);
                            }
                        }
                    }
                };
            })(i);
            xhr.send();
        }
    }

    window.onload = loadUkazy;
</script>

</body>
</html>